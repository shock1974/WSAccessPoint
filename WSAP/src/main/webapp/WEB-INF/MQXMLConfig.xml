<?xml version="1.0" encoding="UTF-8"?>  
<beans xmlns="http://www.springframework.org/schema/beans"  
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd">  
    <!--
 Scans the classpath of this application for @Components to deploy as 
		beans 

<context:component-scan base-package="cn.com.inhand"/>
    <!--  CUSTOMER OBJECTMAPPER  -->
    <!--bean id="objectMapperFactory" class="cn.com.inhand.common.jackson.ObjectMapperFactory"/-->
    <!--bean id="objectMapper" class="com.fasterxml.jackson.databind.ObjectMapper" factory-bean="objectMapperFactory" factory-method="getMapper"/-->
    
    <!-- 创建connectionFactory -->  
    <rabbit:connection-factory id="connectionFactory" host="mall.inhand.com.cn" username="inhand"
                               password="chenjian" port="5672"  />
        
    <!--bean id="mqMessageConverter" class="org.springframework.amqp.support.converter.Jackson2JsonMessageConverter">
        <property name="jsonObjectMapper" ref="objectMapper"/>
    </bean-->
    <rabbit:admin connection-factory="rabbitConnectionFactory"/>
    <rabbit:template id="amqpTemplate" connection-factory="rabbitConnectionFactory"></rabbit:template><!-- message-converter="mqMessageConverter"-->
    <rabbit:queue auto-delete="true" durable="false" id="taskSmartQueue" name="dn.key.taskSmart"/>
     <rabbit:topic-exchange name="taskSmart">
        <rabbit:bindings>
            <rabbit:binding pattern="dn.key.taskSmart.add" queue="taskSmartQueue"/>
        </rabbit:bindings>
    </rabbit:topic-exchange> 
    <rabbit:listener-container concurrency="2" connection-factory="rabbitConnectionFactory" 
    acknowledge="auto" ><!-- message-converter="mqMessageConverter" -->
        <rabbit:listener ref="TaskNotificationConsumer" queues="taskSmartQueue"/>
    </rabbit:listener-container>
    
</beans>  